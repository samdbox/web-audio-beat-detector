// This is the minified and stringified code of the web-audio-beat-detector-worker package.
export const worker = `(()=>{"use strict";const e=(e,t,s)=>{const o=e.length,a=[];let n=!1;for(let r=0;r<o;r+=1)e[r]>t?n=!0:n&&(n=!1,a.push(r-1),r+=s/4-1);return n&&a.push(o-1),a},t=(t,s,o)=>{const a=(e=>{let t=0;const s=e.length;for(let o=0;o<s;o+=1)e[o]>t&&(t=e[o]);return t})(t),n=.3*a;let r=[],p=a-.05*a;if(a>.25)for(;r.length<30&&p>=n;)r=e(t,p,s),p-=.05*a;const l=((e,t,s={})=>{var o,a;const n=Math.max(0,null!==(o=s.minTempo)&&void 0!==o?o:90),r=Math.max(0,null!==(a=s.maxTempo)&&void 0!==a?a:180),p=[];return e.forEach((e=>{let s=60/(e.interval/t);for(;s<n;)s*=2;for(;s>r;)s/=2;let o=!1,a=e.peaks.length;p.forEach((t=>{if(t.tempo===s&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],o=!0),t.tempo>s-.5&&t.tempo<s+.5){const o=2*Math.abs(t.tempo-s);a+=(1-o)*t.peaks.length,t.score+=(1-o)*e.peaks.length}})),o||p.push({peaks:e.peaks,score:a,tempo:s})})),p})((e=>{const t=[];return e.forEach(((s,o)=>{const a=Math.min(e.length-o,10);for(let n=1;n<a;n+=1){const a=e[o+n]-s;t.some((e=>e.interval===a&&(e.peaks.push(s),!0)))||t.push({interval:a,peaks:[s]})}})),t})(r),s,o);return l.sort(((e,t)=>t.score-e.score)),l};addEventListener("message",(({data:e})=>{try{if("analyze"===e.method){const{id:s,params:{channelData:o,sampleRate:a,tempoSettings:n}}=e,r=((e,s,o)=>{const a=t(e,s,o);if(0===a.length)throw new Error("The given channelData does not contain any detectable beats.");return a[0].tempo})(o,a,n);postMessage({error:null,id:s,result:{tempo:r}})}else{if("guess"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{id:s,params:{channelData:o,sampleRate:a,tempoSettings:n}}=e,{bpm:r,offset:p,tempo:l,peaks:h}=((e,s,o)=>{const a=t(e,s,o);if(0===a.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:n,tempo:r}=a[0],p=Math.round(r),l=60/p;n.sort(((e,t)=>e-t));let h=n[0]/s;for(;h>l;)h-=l;return{bpm:p,offset:h,peaks:n,tempo:r}})(o,a,n);postMessage({error:null,id:s,result:{bpm:r,offset:p,tempo:l,peaks:h}})}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}}))})();`; // tslint:disable-line:max-line-length
